/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/static/js/source/admin.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/static/js/source/admin.js":
/*!***************************************!*\
  !*** ./src/static/js/source/admin.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\ntemp.uploadAdmin = '\\n    <div class=\"upload-wrapper\">\\n        <h2>\\u89C6\\u9891\\u4E0A\\u4F20</h2>\\n\\n        <el-row>\\n            <el-col :span=\"4\">\\n                <label>\\u8FD0\\u52A8</label>\\n            </el-col>\\n\\n            <el-col :span=\"10\">\\n                <el-select \\n                :disabled=\"!videoEditable\"\\n                v-model=\"sport_id\" \\n                clearable \\n                placeholder=\"\\u8BF7\\u9009\\u62E9\" \\n                @change=\"handleChooseSport\">\\n                    <el-option\\n                        v-for=\"item in sports\"\\n                        :key=\"item.id\"\\n                        :label=\"item.name\"\\n                        :value=\"item.id\">\\n                    </el-option>\\n                </el-select>\\n            </el-col>\\n            \\n            <el-button v-show=\"videoEditable\" @click=\"newSportConfig.visibility=true\" class=\"new-sport-btn\">\\u65B0\\u5EFA\\u8FD0\\u52A8</el-button>\\n        </el-row>\\n\\n        <el-row ng-show=\"sport_id\">\\n            <el-col :span=\"4\">\\n                <label>\\u4E13\\u8F91</label>\\n            </el-col>\\n\\n            <el-col :span=\"10\">\\n                <el-select \\n                :disabled=\"!videoEditable\"\\n                v-model=\"SO.albumId\" \\n                clearable \\n                placeholder=\"\\u8BF7\\u9009\\u62E9\" \\n                @command=\"chooseAlbumHandler\">\\n                    <el-option\\n                        v-for=\"item in albums\"\\n                        :key=\"item.id\"\\n                        :label=\"item.name\"\\n                        :value=\"item.id\">\\n                    </el-option>\\n                </el-select>\\n            </el-col>\\n            \\n            <el-button v-show=\"videoEditable\" @click=\"openAlbumDialog();\" class=\"new-album-btn\">\\u65B0\\u5EFA\\u4E13\\u8F91</el-button>\\n        </el-row>\\n\\n        <el-row v-if=\"selectedMaker\">\\n            <el-col :span=\"4\">\\n                <label>\\u4E13\\u8F91\\u4F5C\\u8005</label>\\n            </el-col>\\n            <el-col :span=\"10\">\\n                <el-input v-model=\"selectedMaker\" :disabled=\"!!selectedMaker\" placeholder=\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u8005\"></el-input>\\n            </el-col>\\n        </el-row>\\n\\n        <el-row>\\n            <el-col :span=\"4\">\\n                <label>\\u6807\\u9898</label>\\n            </el-col>\\n\\n            <el-col :span=\"10\">\\n                <el-input :disabled=\"!videoEditable\" v-model=\"SO.headline\" placeholder=\"\\u8BF7\\u8F93\\u5165\\u6807\\u9898\"></el-input>\\n            </el-col>\\n        </el-row>\\n\\n        <el-row>\\n            <el-col :span=\"4\">\\n                <label>\\u82F1\\u6587\\u6807\\u9898</label>\\n            </el-col>\\n\\n            <el-col :span=\"10\">\\n                <el-input :disabled=\"!videoEditable\" v-model=\"SO.headlineEng\" placeholder=\"\\u8BF7\\u8F93\\u5165\\u82F1\\u6587\\u6807\\u9898\"></el-input>\\n            </el-col>\\n        </el-row>\\n\\n        <el-row>\\n            <el-col :span=\"4\">\\n                <label>\\u6807\\u7B7E</label>\\n            </el-col>\\n            <el-col :span=\"10\">\\n                <el-select v-model=\"SO.tag\"\\n                    :disabled=\"!videoEditable\" \\n                    clearable\\n                    multiple\\n                    filterable\\n                    placeholder=\"\\u8BF7\\u9009\\u62E9tag\">\\n                    <el-option\\n                        v-for=\"item in tags\"\\n                        :key=\"item.id\"\\n                        :label=\"item.name\"\\n                        :value=\"item.id\">\\n                    </el-option>\\n                </el-select>\\n            </el-col>\\n            \\n            <el-button v-show=\"videoEditable\" v-on:click=\"\" @click=\"tagConfig.visibility = true\" class=\"new-tag-btn\">\\u65B0\\u5EFA\\u6807\\u7B7E</el-button>\\n        </el-row>\\n\\n        <el-row>\\n            <el-col :span=\"4\">\\n                <label>\\u89C6\\u9891</label>\\n            </el-col>\\n\\n            <el-col :span=\"10\">\\n                <el-upload\\n                    v-show=\"videoEditable\"\\n                    class=\"upload-demo\"\\n                    action=\"/upload\"\\n                    accept=\"video/*\"\\n                    :data=\"{type:\\'video\\'}\"\\n                    :on-preview=\"handlePreview\"\\n                    :on-remove=\"handleVideoRemove\"\\n                    :on-success=\"handleVideoSuccess\"\\n                    :limit=\"1\"\\n                    :on-exceed=\"handleExceed\"\\n                    :file-list=\"videoFileList\"\\n                    >\\n                    <el-button size=\"small\" type=\"primary\">\\u4E0A\\u4F20\\u89C6\\u9891</el-button>\\n                </el-upload>\\n                <el-input v-show=\"!videoEditable\" :value=\"vId+videoInfo.video_ext\" disabled/>\\n            </el-col>\\n        </el-row>\\n\\n        <el-row>\\n            <el-col :span=\"4\">\\n                <label>\\u5B57\\u5E55</label>\\n            </el-col>\\n\\n            <el-col :span=\"10\">\\n                <el-upload\\n                    v-show=\"videoEditable\"\\n                    class=\"upload-demo\"\\n                    action=\"/upload\"\\n                    accept=\".srt\"\\n                    :data=\"{type:\\'subtitle\\'}\"\\n                    :on-remove=\"handleSubtitleRemove\"\\n                    :on-success=\"handleSubtitleSuccess\"\\n                    :limit=\"1\"\\n                    :on-exceed=\"handleExceed\"\\n                    :file-list=\"subtitleFileList\"\\n                    >\\n                    <el-button size=\"small\" type=\"primary\">\\u4E0A\\u4F20\\u5B57\\u5E55</el-button>\\n                </el-upload>\\n                <el-input v-show=\"!videoEditable\" :value=\"vId+\\'.srt\\'\" disabled/>\\n            </el-col>\\n        </el-row>\\n\\n        <el-row>\\n            <el-col :span=\"4\">&nbsp;</el-col>\\n            <el-col :span=\"10\">\\n                <el-button v-show=\"videoEditable && (vId || SO.videoAbsPath)\" v-on:click=\"vId?putVideo(): postVideo()\" class=\"new-video-btn\">\\u63D0\\u4EA4</el-button>\\n                <el-button v-show=\"!videoEditable\" v-on:click=\"videoEditable=true;\" class=\"new-video-btn\">\\u7F16\\u8F91</el-button>\\n            </el-col>\\n        </el-row>\\n\\n        <el-dialog v-bind:title=\"newSportConfig.title\" :visible.sync=\"newSportConfig.visibility\" @close=\"newSportConfig.visibility=true\">\\n            <el-form class=\"newTagDialog\">\\n                <el-form-item label=\"\\u8FD0\\u52A8\\u540D\\u79F0\">\\n                    <el-input v-model=\"newSport.name\" auto-complete=\"off\"></el-input>\\n                </el-form-item>\\n            </el-form>\\n            <div slot=\"footer\" class=\"dialog-footer\" v-show=\"!sId\">\\n                <el-button @click=\"newSportConfig.visibility = false\">\\u53D6 \\u6D88</el-button>\\n                <el-button type=\"primary\" @click=\"newSportConfig.visibility = false; postSport();\">\\u786E \\u5B9A</el-button>\\n            </div>\\n\\n            <div slot=\"footer\" class=\"dialog-footer\" v-show=\"sId\">\\n                <el-button type=\"primary\" @click=\"newSportConfig.visibility = false; putSport()\">\\u786E \\u5B9A</el-button>\\n                <el-button @click=\"backToSportList()\">\\u8FD4 \\u56DE</el-button>\\n            </div>\\n        </el-dialog>\\n\\n        <el-dialog v-bind:title=\"albumConfig.title\" :visible.sync=\"albumConfig.visibility\" @close=\"dealCloseDialog\">\\n            <el-form class=\"newAlbumDialog\">\\n                <el-form-item label=\"\\u8FD0\\u52A8\\u9879\\u76EE\">\\n                    <el-select v-model=\"newAlbum.sportId\" \\n                        :disabled=\"!albumEditable\"\\n                        clearable\\n                        filterable\\n                        placeholder=\"\\u8BF7\\u9009\\u62E9\">\\n                        <el-option\\n                            v-for=\"item in sports\"\\n                            :key=\"item.id\"\\n                            :label=\"item.name\"\\n                            :value=\"item.id\">\\n                        </el-option>\\n                    </el-select>\\n                </el-form-item>\\n                <el-form-item label=\"\\u5236\\u4F5C\\u8005\">\\n                    <el-select v-model=\"newAlbum.maker\" \\n                        :disabled=\"!albumEditable\"\\n                        clearable\\n                        filterable\\n                        placeholder=\"\\u8BF7\\u9009\\u62E9\">\\n                        <el-option\\n                            v-for=\"item in makers\"\\n                            :key=\"item.id\"\\n                            :label=\"item.name\"\\n                            :value=\"item.id\">\\n                        </el-option>\\n                    </el-select>\\n                    <el-button @click=\"makerConfig.visibility=true\" v-show=\"!aId || (aId && albumEditable)\">\\u521B\\u5EFA</el-button>\\n                </el-form-item>\\n                <el-form-item label=\"\\u6807\\u7B7E\">\\n                    <el-select v-model=\"newAlbum.tag\" \\n                        :disabled=\"!albumEditable\"\\n                        clearable\\n                        filterable\\n                        placeholder=\"\\u8BF7\\u9009\\u62E9\">\\n                        <el-option\\n                            v-for=\"item in tags\"\\n                            :key=\"item.id\"\\n                            :label=\"item.name\"\\n                            :value=\"item.id\">\\n                        </el-option>\\n                    </el-select>\\n                </el-form-item>\\n                <el-form-item label=\"\\u4E13\\u8F91\\u540D\\u79F0\">\\n                    <el-input v-model=\"newAlbum.name\" :disabled=\"!albumEditable\" auto-complete=\"off\" style=\"width: 217px;\"></el-input>\\n                </el-form-item>\\n                <el-form-item label=\"\" v-if=\"!aId\">\\n                    <el-upload\\n                        class=\"album-cover-uploader\"\\n                        action=\"/upload\"\\n                        :data=\"{type:\\'img\\'}\"\\n                        :on-remove=\"handleAlbumCoverRemove\"\\n                        :on-success=\"handleAlbumCoverSuccess\"\\n                        :limit=\"1\"\\n                        :on-exceed=\"handleExceed\"\\n                        :file-list=\"albumCoverfileList\"\\n                        >\\n                        <el-button size=\"\" type=\"primary\">\\u4E0A\\u4F20\\u5C01\\u9762</el-button>\\n                    </el-upload>\\n                </el-form-item>\\n                <el-form-item label=\"\" v-if=\"aId\">\\n                    <el-upload\\n                        v-show=\"albumEditable\"\\n                        class=\"album-cover-uploader\"\\n                        action=\"/upload\"\\n                        :data=\"{type:\\'img\\'}\"\\n                        :on-remove=\"handleAlbumCoverRemove\"\\n                        :on-success=\"handleAlbumCoverSuccess\"\\n                        :limit=\"1\"\\n                        :on-exceed=\"handleExceed\"\\n                        :file-list=\"albumCoverfileList\"\\n                        >\\n                        <el-button size=\"\" type=\"primary\">\\u4E0A\\u4F20\\u5C01\\u9762</el-button>\\n                    </el-upload>\\n                    <img v-show=\"!albumEditable\" :src=\"\\'/img/cover/album/\\' + aId + \\'.jpg\\'\"/>\\n                </el-form-item>\\n            </el-form>\\n            <div slot=\"footer\" class=\"dialog-footer\" v-show=\"!aId\">\\n                <el-button @click=\"albumConfig.visibility = false\">\\u53D6 \\u6D88</el-button>\\n                <el-button type=\"primary\"  @click=\"albumConfig.visibility = false; postAlbum();\">\\u786E \\u5B9A</el-button>\\n            </div>\\n\\n            <div slot=\"footer\" class=\"dialog-footer\" v-show=\"aId\">\\n                <el-button type=\"primary\" v-show=\"albumEditable\" @click=\"albumConfig.visibility = false; putAlbum()\">\\u786E \\u5B9A</el-button>\\n                <el-button type=\"primary\" @click=\"albumEditable=true\" v-show=\"!albumEditable\">\\u7F16\\u8F91</el-button>\\n                <el-button @click=\"backToAlbumList()\">\\u8FD4 \\u56DE</el-button>\\n            </div>\\n        </el-dialog>\\n\\n        <el-dialog v-bind:title=\"tagConfig.title\" :visible.sync=\"tagConfig.visibility\">\\n            <el-form class=\"newTagDialog\">\\n                <el-form-item label=\"\\u6807\\u7B7E\\u540D\\u79F0\">\\n                    <el-input v-model=\"newTag.name\" auto-complete=\"off\"></el-input>\\n                </el-form-item>\\n                <el-form-item label=\"\\u8FD0\\u52A8\\u9879\\u76EE\">\\n                    <el-select v-model=\"newTag.sportId\" \\n                        clearable\\n                        filterable\\n                        placeholder=\"\\u8BF7\\u9009\\u62E9\">\\n                        <el-option\\n                            v-for=\"item in sports\"\\n                            :key=\"item.id\"\\n                            :label=\"item.name\"\\n                            :value=\"item.id\">\\n                        </el-option>\\n                    </el-select>\\n                </el-form-item>\\n            </el-form>\\n            <div slot=\"footer\" class=\"dialog-footer\">\\n                <el-button @click=\"tagConfig.visibility = false\">\\u53D6 \\u6D88</el-button>\\n                <el-button type=\"primary\" @click=\"tagConfig.visibility = false; postTag();\">\\u786E \\u5B9A</el-button>\\n            </div>\\n        </el-dialog>\\n\\n        <el-dialog v-bind:title=\"makerConfig.title\" :visible.sync=\"makerConfig.visibility\">\\n            <el-form class=\"newTagDialog\">\\n                <el-form-item label=\"\\u540D\\u5B57\">\\n                    <el-input v-model=\"newMaker.name\" auto-complete=\"off\"></el-input>\\n                </el-form-item>\\n                <el-form-item label=\"\\u63CF\\u8FF0\">\\n                    <el-input v-model=\"newMaker.desc\" type=\"textarea\" style=\"width: 300px;\"></el-input>\\n                </el-form-item>\\n            </el-form>\\n            <div slot=\"footer\" class=\"dialog-footer\">\\n                <el-button @click=\"makerConfig.visibility = false\">\\u53D6 \\u6D88</el-button>\\n                <el-button type=\"primary\" @click=\"makerConfig.visibility = false; postMaker();\">\\u786E \\u5B9A</el-button>\\n            </div>\\n        </el-dialog>\\n    </div>\\n';\n\nCOMPONENTS.UploadAdmin = {\n    props: ['vId', 'aId', 'sId'],\n    data: function data() {\n        var newSportConfig = {\n            visibility: false,\n            title: '新建运动'\n        };\n\n        var tagConfig = {\n            visibility: false,\n            title: '新建标签'\n        };\n\n        var albumConfig = {\n            visibility: false,\n            title: '新建专辑'\n        };\n\n        var makerConfig = {\n            visibility: false,\n            title: '新建制作者'\n        };\n\n        var d = {\n            sport_id: null,\n            SO: {\n                albumId: '',\n                headline: '',\n                tag: '',\n                videoAbsPath: '',\n                subtitleAbsPath: ''\n            },\n            albums: [],\n            tags: [],\n            sports: [],\n            makers: [],\n            newSportConfig: newSportConfig,\n            tagConfig: tagConfig,\n            albumConfig: albumConfig,\n            makerConfig: makerConfig,\n\n            newSport: {},\n            newTag: {},\n            newAlbum: { sportId: '', maker: '', tag: '', name: '', cover: '' }, // 必须要给默认值？\n            newMaker: {},\n            selectedMaker: '',\n\n            videoInfo: {},\n            // albumInfo: {},\n            sportInfo: {},\n\n            videoEditable: true,\n            albumEditable: true,\n\n            videoFileList: [],\n            subtitleFileList: [],\n            albumCoverfileList: []\n        };\n\n        if (this.vId) {\n            d.videoEditable = false;\n        } else if (this.aId) {\n            d.albumEditable = false;\n        } else if (this.sId) {\n            d.newSportConfig = {\n                title: '编辑运动',\n                visibility: true\n            };\n        }\n\n        d.fileList = [];\n\n        return d;\n    },\n    methods: {\n        dealCloseDialog: function dealCloseDialog() {\n            if (this.aId) {\n                this.albumConfig.visibility = true;\n            }\n        },\n\n        backToAlbumList: function backToAlbumList() {\n            location.href = \"#/albumsAdmin\";\n        },\n\n        backToSportList: function backToSportList() {\n            location.href = \"#/sportsAdmin\";\n        },\n\n        handleVideoRemove: function handleVideoRemove(file, fileList) {\n            this.SO.videoAbsPath = '';\n        },\n        handleSubtitleRemove: function handleSubtitleRemove(file, fileList) {\n            this.SO.subtitleAbsPath = '';\n        },\n        handleAlbumCoverRemove: function handleAlbumCoverRemove(file, fileList) {\n            this.newAlbum.cover = '';\n        },\n        handlePreview: function handlePreview(file) {\n            console.log(file);\n        },\n\n        // 只能传一个文件，视频、字幕、专辑封面\n        handleExceed: function handleExceed(files, fileList) {\n            this.$message.warning('\\u53EA\\u80FD\\u4F20\\u4E00\\u4E2A\\u6587\\u4EF6');\n            // this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n        },\n        handleVideoSuccess: function handleVideoSuccess(res) {\n            // console.log(res);\n            this.SO.videoAbsPath = res.absPath;\n        },\n        handleSubtitleSuccess: function handleSubtitleSuccess(res) {\n            this.SO.subtitleAbsPath = res.absPath;\n        },\n        handleAlbumCoverSuccess: function handleAlbumCoverSuccess(res) {\n            this.newAlbum.cover = res.relPath;\n        },\n\n\n        handleChooseSport: function handleChooseSport(sportId) {\n            if (sportId) this.queryAlbums(sportId);\n        },\n\n        postVideo: function postVideo() {\n            var so = Object.assign({}, this.SO);\n            so.tag = this.SO.tag.join(',');\n\n            tools.xhr('/video', function () {\n                var vId = this.vId;\n                var action = this.vId ? '更新' : '创建';\n                var message = '\\u89C6\\u9891' + action + '\\u6210\\u529F';\n\n                this.$message({\n                    message: message,\n                    type: 'success'\n                });\n\n                this.SO.videoAbsPath = '';\n                this.SO.subtitleAbsPath = '';\n\n                this.videoFileList = [];\n                this.subtitleFileList = [];\n            }.bind(this), 'post', so);\n        },\n        postSport: function postSport() {\n\n            tools.xhr('/sport', function () {\n                this.$message({\n                    message: '新建成功',\n                    type: 'success'\n                });\n                this.querySports();\n            }.bind(this), 'post', this.newSport);\n        },\n        postTag: function postTag() {\n\n            tools.xhr('/tag', function () {\n                console.log(arguments);\n            }, 'post', this.newTag);\n        },\n        postMaker: function postMaker() {\n            tools.xhr('/maker', function () {\n                console.log(arguments);\n                this.$message({\n                    message: '制作者创建成功',\n                    type: 'success'\n                });\n                this.queryMakers();\n            }.bind(this), 'post', this.newMaker);\n        },\n        openAlbumDialog: function openAlbumDialog() {\n            this.albumConfig.visibility = true;\n            this.queryMakers();\n        },\n        postAlbum: function postAlbum() {\n            tools.xhr('/album', function () {\n                // console.log(arguments);\n                this.$message({\n                    message: '专辑创建成功',\n                    type: 'success'\n                });\n\n                this.queryAlbums(this.sport_id);\n            }.bind(this), 'post', this.newAlbum);\n        },\n        queryAlbums: function queryAlbums(sportId) {\n            if (!sportId) return;\n\n            tools.xhr('/sports/' + sportId + '/albums', function (resData) {\n                this.albums = resData;\n            }.bind(this));\n        },\n        queryTags: function queryTags() {\n            tools.xhr('/tags', function (resData) {\n                this.tags = resData;\n            }.bind(this));\n        },\n        querySports: function querySports() {\n            tools.xhr('/sports', function (resData) {\n                this.sports = resData;\n            }.bind(this));\n        },\n        queryMakers: function queryMakers() {\n            tools.xhr('/makers', function (resData) {\n                this.makers = resData;\n            }.bind(this));\n        },\n        chooseAlbumHandler: function chooseAlbumHandler() {\n            console.log('chooseAlbumHandler', arguments);\n        },\n        queryMaker: function queryMaker(makerId) {\n            tools.xhr('/maker/' + makerId, function (resData) {\n                var makerInfo = resData[0];\n                if (makerInfo) {\n                    this.selectedMaker = resData[0].name;\n                } else {\n                    this.selectedMaker = '';\n                }\n            }.bind(this));\n        },\n        fetchVideoInfo: function fetchVideoInfo(fn) {\n            tools.xhr('/videoInfo/' + this.vId, function (resData) {\n                this.videoInfo = resData;\n\n                this.sport_id = resData.sport_id;\n\n                this.SO.albumId = resData.album_id;\n                this.SO.headline = resData.headline;\n                this.SO.headlineEng = resData.headline_eng;\n                this.SO.tag = resData.tag ? resData.tag.split(',').map(function () {\n                    return Number(arguments[0]);\n                }) : [];\n\n                fn && fn(resData.sport_id);\n            }.bind(this));\n        },\n\n\n        fetchAlbumInfo: function fetchAlbumInfo() {\n            tools.xhr('/albumInfo/' + this.aId, function (resData) {\n                this.newAlbum.sportId = resData.sport_id;\n                this.newAlbum.maker = Number(resData.author_id);\n                this.newAlbum.tag = Number(resData.tag);\n                this.newAlbum.name = resData.name;\n            }.bind(this));\n        },\n\n        fetchSportInfo: function fetchSportInfo() {\n            tools.xhr('/sportInfo/' + this.sId, function (resData) {\n                this.newSport.name = resData.name;\n            }.bind(this));\n        },\n\n        putVideo: function putVideo() {\n            var so = Object.assign({}, this.SO);\n            so.tag = this.SO.tag.join(',');\n\n            tools.xhr('/video/' + this.vId, function () {\n                console.log(arguments);\n                this.$message({\n                    message: '视频更新成功',\n                    type: 'success'\n                });\n                this.videoEditable = false;\n\n                this.SO.videoAbsPath = '';\n                this.SO.subtitleAbsPath = '';\n\n                this.videoFileList = [];\n                this.subtitleFileList = [];\n            }.bind(this), 'put', so, function () {\n                this.SO.subtitleAbsPath = '';\n                this.SO.videoAbsPath = '';\n            });\n        },\n\n\n        putAlbum: function putAlbum() {\n            tools.xhr('/album/' + this.aId, function () {\n                this.$message({\n                    message: '更新成功',\n                    type: 'success'\n                });\n                this.albumEditable = false;\n                location.href = \"#/albumsAdmin\";\n            }.bind(this), 'put', this.newAlbum, function () {\n                this.$message({\n                    message: '更新出错',\n                    type: 'success'\n                });\n            });\n        },\n\n        putSport: function putSport() {\n            tools.xhr('/sport/' + this.sId, function () {\n                this.$message({\n                    message: '更新成功',\n                    type: 'success'\n                });\n                location.href = \"#/sportsAdmin\";\n            }.bind(this), 'put', this.newSport, function () {\n                this.$message({\n                    message: '更新出错',\n                    type: 'success'\n                });\n            });\n        }\n    },\n\n    // watch: {'SO.albumId': function(to, from){\n    // \tif(to){\n    // \t\tthis.queryMaker(to)\n    // \t}else{\n    // \t\tthis.selectedMaker = '';\n    // \t}\n    // }},\n\n    mounted: function mounted() {\n\n        tools.togglePageIE(this);\n        if (this.vId) {\n            this.fetchVideoInfo(function (sId) {\n                this.queryAlbums(sId);\n            }.bind(this));\n        } else if (this.aId) {\n            this.fetchAlbumInfo();\n            this.queryMakers();\n            this.albumConfig.visibility = true;\n            this.albumConfig.title = '更新专辑';\n        } else if (this.sId) {\n            this.fetchSportInfo();\n        }\n\n        this.querySports();\n        this.queryTags();\n    },\n\n    template: temp.uploadAdmin\n};\n\nrouteConfig.push({ path: '/uploadAdmin', component: COMPONENTS.UploadAdmin, props: function props(route) {\n        return { vId: route.query.vId, aId: route.query.aId, sId: route.query.sId };\n    } });\n\ntemp.feedbacksAdmin = '\\n    <div>\\n        <h2>\\u53CD\\u9988\\u5217\\u8868</h2>\\n\\n        <el-table\\n        :data=\"feedbacks\"\\n        style=\"width: 100%\">\\n            <el-table-column\\n                prop=\"id\"\\n                label=\"\\u7F16\\u53F7\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"ip\"\\n                label=\"ip\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"usr_id\"\\n                label=\"\\u7528\\u6237id\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"description\"\\n                label=\"\\u63CF\\u8FF0\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"site\"\\n                label=\"\\u7F51\\u5740\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"wechat\"\\n                label=\"\\u5FAE\\u4FE1\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"email\"\\n                label=\"\\u90AE\\u4EF6\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"files\"\\n                label=\"\\u6587\\u4EF6\">\\n            </el-table-column>\\n            <el-table-column\\n                fixed=\"right\"\\n                label=\"\\u64CD\\u4F5C\"\\n                width=\"100\">\\n                <template slot-scope=\"scope\">\\n                    <el-button @click=\"deleteFeedback(scope.row.id)\" type=\"text\" size=\"small\">\\u5220\\u9664</el-button>\\n                    <el-button v-if=\"!scope.row.black_usr_id_record && !scope.row.black_ip_record\" @click=\"blockUsr(scope.row.ip, scope.row.usr_id, $event)\" type=\"text\" size=\"small\">\\u52A0\\u9ED1</el-button>\\n                </template>\\n            </el-table-column>\\n        </el-table>\\n\\n        <el-pagination\\n            layout=\"prev, pager, next\"\\n            :total=\"total\"\\n            :page-size=\"pageSize\"\\n            @current-change=\"fetchFeedbacks\">\\n        </el-pagination>\\n    </div>\\n';\n\nCOMPONENTS.FeedbacksAdmin = {\n    data: function data() {\n\n        var d = {\n            pageSize: 10,\n            curPage: 0,\n            total: 0,\n            feedbacks: []\n        };\n\n        return d;\n    },\n    methods: {\n        postTag: function postTag() {\n\n            tools.xhr('/tag', function () {\n                console.log(arguments);\n            }, 'post', this.newTag);\n        },\n        fetchFeedbacks: function fetchFeedbacks(pageNum) {\n            tools.xhr('/feedbacks', function (resData) {\n                this.feedbacks = resData.datalist;\n                this.total = resData.total;\n                this.curPage = pageNum;\n            }.bind(this), 'get', {\n                pageNum: pageNum - 1,\n                pageSize: this.pageSize\n            });\n        },\n\n\n        deleteFeedback: function deleteFeedback(id) {\n            this.$confirm('确定删除', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(function () {\n                tools.xhr('/feedback/' + id, function (resData) {\n                    this.fetchFeedbacks(this.curPage);\n                    this.$message({\n                        message: '删除成功',\n                        type: 'success'\n                    });\n                }.bind(this), 'delete');\n            }.bind(this)).catch(function () {});\n        },\n\n        blockUsr: function blockUsr(ip, usrId, e) {\n            this.$confirm('确认加黑？').then(function () {\n                tools.xhr('/blockedUsr', function (resData) {\n                    this.$message({\n                        message: '加黑成功',\n                        type: 'success'\n                    });\n\n                    // $(e.target).remove();\n                }.bind(this), 'post', {\n                    ip: ip,\n                    usrId: usrId\n                });\n            }.bind(this)).catch(function () {});\n        }\n    },\n\n    // watch: {'SO.albumId': function(to, from){\n    // \tif(to){\n    // \t\tthis.queryMaker(to)\n    // \t}else{\n    // \t\tthis.selectedMaker = '';\n    // \t}\n    // }},\n\n    template: temp.feedbacksAdmin,\n\n    mounted: function mounted() {\n\n        tools.togglePageIE(this);\n        this.fetchFeedbacks(1);\n    }\n};\n\nrouteConfig.push({ path: '/feedbacksAdmin', component: COMPONENTS.FeedbacksAdmin });\n\ntemp.videosAdmin = '\\n    <div>\\n        <h2>\\u89C6\\u9891\\u5217\\u8868</h2>\\n\\n        <el-table\\n        :data=\"videos\"\\n        style=\"width: 100%\">\\n            <el-table-column\\n                prop=\"id\"\\n                label=\"id\">\\n            </el-table-column>\\n            \\n            <el-table-column\\n                prop=\"album_id\"\\n                label=\"album_id\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"headline\"\\n                label=\"headline\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"tag\"\\n                label=\"tag\">\\n            </el-table-column>\\n\\n            <el-table-column\\n                fixed=\"right\"\\n                label=\"\\u64CD\\u4F5C\"\\n                width=\"200\">\\n                <template slot-scope=\"scope\">\\n                    <el-button @click=\"patchVideo(scope.row.id)\" type=\"text\" size=\"small\">\\u66F4\\u65B0</el-button>\\n                    <el-button @click=\"deleteVideo(scope.row.id)\" type=\"text\" size=\"small\">\\u5220\\u9664</el-button>\\n                    <el-button @click=\"redirect(scope.row.id)\" type=\"text\" size=\"small\">\\u67E5\\u770B</el-button>\\n                </template>\\n            </el-table-column>\\n        </el-table>\\n\\n        <el-pagination\\n            layout=\"prev, pager, next\"\\n            :total=\"total\"\\n            :page-size=\"pageSize\"\\n            @current-change=\"fetchVideos\">\\n        </el-pagination>\\n    </div>\\n';\n\nCOMPONENTS.VideosAdmin = {\n    data: function data() {\n\n        var d = {\n            pageSize: 10,\n            curPage: 0,\n            total: 0,\n            videos: []\n        };\n\n        return d;\n    },\n    methods: {\n        fetchVideos: function fetchVideos(pageNum) {\n            tools.xhr('/pageVideos', function (resData) {\n                this.videos = resData.datalist;\n                this.total = resData.total;\n                this.curPage = pageNum;\n            }.bind(this), 'get', {\n                pageNum: pageNum - 1,\n                pageSize: this.pageSize\n            });\n        },\n\n\n        patchVideo: function patchVideo(id) {\n            location.href = '#/uploadAdmin?vId=' + id;\n        },\n\n        deleteVideo: function deleteVideo(id) {\n            this.$confirm('确定删除', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(function () {\n                tools.xhr('/video/' + id, function (resData) {\n                    this.fetchVideos(this.curPage);\n                    this.$message({\n                        message: '删除成功',\n                        type: 'success'\n                    });\n                }.bind(this), 'delete');\n            }.bind(this)).catch(function () {});\n        },\n\n        redirect: function redirect(id) {\n            location.href = \"#/videos/\" + id;\n        }\n    },\n\n    template: temp.videosAdmin,\n\n    mounted: function mounted() {\n        tools.togglePageIE(this);\n        this.fetchVideos(1);\n    }\n};\n\nrouteConfig.push({ path: '/videosAdmin', component: COMPONENTS.VideosAdmin });\n\ntemp.albumsAdmin = '\\n    <div>\\n        <h2>\\u4E13\\u8F91\\u5217\\u8868</h2>\\n\\n        <el-table\\n        :data=\"albums\"\\n        style=\"width: 100%\">\\n            <el-table-column\\n                prop=\"id\"\\n                label=\"id\">\\n            </el-table-column>\\n            \\n            <el-table-column\\n                prop=\"sport_id\"\\n                label=\"\\u8FD0\\u52A8\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"author_id\"\\n                label=\"\\u5236\\u4F5C\\u8005\\u7F16\\u53F7\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"name\"\\n                label=\"\\u6807\\u9898\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"tag\"\\n                label=\"\\u6807\\u7B7E\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"impression\"\\n                label=\"\\u89C2\\u770B\\u6B21\\u6570\">\\n            </el-table-column>\\n            <el-table-column\\n                prop=\"update_time\"\\n                label=\"\\u66F4\\u65B0\\u65F6\\u95F4\">\\n            </el-table-column>\\n\\n            <el-table-column\\n                fixed=\"right\"\\n                label=\"\\u64CD\\u4F5C\"\\n                width=\"200\">\\n                <template slot-scope=\"scope\">\\n                    <el-button @click=\"patchAlbum(scope.row.id)\" type=\"text\" size=\"small\">\\u66F4\\u65B0</el-button>\\n                    <el-button @click=\"deleteAlbum(scope.row.id)\" type=\"text\" size=\"small\">\\u5220\\u9664</el-button>\\n                    <el-button @click=\"redirect(scope.row.id)\" type=\"text\" size=\"small\">\\u67E5\\u770B</el-button>\\n                </template>\\n            </el-table-column>\\n        </el-table>\\n\\n        <el-pagination\\n            layout=\"prev, pager, next\"\\n            :total=\"total\"\\n            :page-size=\"pageSize\"\\n            @current-change=\"fetchAlbums\">\\n        </el-pagination>\\n    </div>\\n';\n\nCOMPONENTS.AlbumsAdmin = {\n    data: function data() {\n\n        var d = {\n            pageSize: 10,\n            curPage: 0,\n            total: 0,\n            albums: []\n        };\n\n        return d;\n    },\n    methods: {\n        fetchAlbums: function fetchAlbums(pageNum) {\n            // 分页专辑\n            tools.xhr('/albums', function (resData) {\n                this.albums = resData.datalist;\n                this.total = resData.total;\n                this.curPage = pageNum;\n            }.bind(this), 'get', {\n                pageNum: pageNum - 1,\n                pageSize: this.pageSize\n            });\n        },\n\n\n        patchAlbum: function patchAlbum(id) {\n            location.href = '#/uploadAdmin?aId=' + id;\n        },\n\n        deleteAlbum: function deleteAlbum(id) {\n            this.$confirm('确定删除', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(function () {\n                tools.xhr('/album/' + id, function (resData) {\n                    this.fetchAlbums(this.curPage);\n                    this.$message({\n                        message: '删除成功',\n                        type: 'success'\n                    });\n                }.bind(this), 'delete');\n            }.bind(this)).catch(function () {});\n        },\n\n        redirect: function redirect(id) {\n            location.href = \"#/albums/\" + id;\n        }\n    },\n\n    template: temp.albumsAdmin,\n\n    mounted: function mounted() {\n        tools.togglePageIE(this);\n        this.fetchAlbums(1);\n    }\n};\n\nrouteConfig.push({ path: '/albumsAdmin', component: COMPONENTS.AlbumsAdmin });\n\ntemp.sportsAdmin = '\\n    <div>\\n        <h2>\\u8FD0\\u52A8\\u5217\\u8868</h2>\\n\\n        <el-table\\n        :data=\"sports\"\\n        style=\"width: 100%\">\\n            <el-table-column\\n                prop=\"id\"\\n                label=\"id\">\\n            </el-table-column>\\n            \\n            <el-table-column\\n                prop=\"name\"\\n                label=\"\\u540D\\u79F0\">\\n            </el-table-column>\\n\\n            <el-table-column\\n                prop=\"impression\"\\n                label=\"\\u89C2\\u770B\\u6B21\\u6570\">\\n            </el-table-column>\\n\\n            <el-table-column\\n                prop=\"update_time\"\\n                label=\"\\u66F4\\u65B0\\u65F6\\u95F4\">\\n            </el-table-column>\\n\\n            <el-table-column\\n                fixed=\"right\"\\n                label=\"\\u64CD\\u4F5C\"\\n                width=\"200\">\\n                <template slot-scope=\"scope\">\\n                    <el-button @click=\"patchSport(scope.row.id)\" type=\"text\" size=\"small\">\\u66F4\\u65B0</el-button>\\n                    <el-button @click=\"deleteSport(scope.row.id)\" type=\"text\" size=\"small\">\\u5220\\u9664</el-button>\\n                    <el-button @click=\"redirect(scope.row.id)\" type=\"text\" size=\"small\">\\u67E5\\u770B</el-button>\\n                </template>\\n            </el-table-column>\\n        </el-table>\\n\\n        <el-pagination\\n            layout=\"prev, pager, next\"\\n            :total=\"total\"\\n            :page-size=\"pageSize\"\\n            @current-change=\"fetchSports\">\\n        </el-pagination>\\n    </div>\\n';\n\nCOMPONENTS.SportsAdmin = {\n    data: function data() {\n\n        var d = {\n            pageSize: 10,\n            curPage: 0,\n            total: 0,\n            sports: []\n        };\n\n        return d;\n    },\n    methods: {\n        fetchSports: function fetchSports(pageNum) {\n            // 分页专辑\n            tools.xhr('/sports', function (resData) {\n                this.sports = resData.datalist;\n                this.total = resData.total;\n                this.curPage = pageNum;\n            }.bind(this), 'get', {\n                pageNum: pageNum - 1,\n                pageSize: this.pageSize\n            });\n        },\n\n\n        patchSport: function patchSport(id) {\n            location.href = '#/uploadAdmin?sId=' + id;\n        },\n\n        deleteSport: function deleteSport(id) {\n            this.$confirm('确定删除', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(function () {\n                tools.xhr('/sport/' + id, function (resData) {\n                    this.fetchSports(this.curPage);\n                    this.$message({\n                        message: '删除成功',\n                        type: 'success'\n                    });\n                }.bind(this), 'delete');\n            }.bind(this)).catch(function () {});\n        },\n\n        redirect: function redirect(id) {\n            location.href = \"#/sports/\" + id;\n        }\n    },\n\n    template: temp.sportsAdmin,\n\n    mounted: function mounted() {\n        tools.togglePageIE(this);\n        this.fetchSports(1);\n    }\n};\n\nrouteConfig.push({ path: '/sportsAdmin', component: COMPONENTS.SportsAdmin });\n\n//# sourceURL=webpack:///./src/static/js/source/admin.js?");

/***/ })

/******/ });