<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="keywords" content="网球视频,运动视频,约球" />
		<meta name="description" content="学习、交流、分享运动技巧的平台" />
		<title>网球/Tennis</title>
		<link rel="shortcut icon" href="/img/logo.png">
        <link rel="stylesheet" href="../css/font-awesome.min.css">
        <link rel="stylesheet" href="../css/comp.css">

		<script src="../lib/browser-detect.js"></script>
		<script type="text/javascript">
			if(/Android (\d+\.\d+)/.test(navigator.userAgent)){
				var version = parseFloat(RegExp.$1);
				if(version>2.3){
					var phoneScale = parseInt(window.screen.width) / 750;
					document.write('<meta name="viewport" content="width=750, minimum-scale = '+ phoneScale +', maximum-scale = '+ phoneScale +', target-densitydpi=device-dpi">');
				}else{
					document.write('<meta name="viewport" content="width=750, target-densitydpi=device-dpi">');
				}
			}else{
				document.write('<meta name="viewport" content="width=750, user-scalable=no, target-densitydpi=device-dpi">');
			}
		</script>
		<script>
			var noSupportItems = {ie: [8, 7, 5, 6]};
			BrowserDetect.init(noSupportItems);
			window.isMobile = BrowserDetect.detectMob();
		</script>
	</head>

	<body>
            <!-- 规则视频
            历史
            水平评测
            排行榜
             -->
        <h1>网球</h1>

        <h2>规则视频</h2>
        <div class="player-wrapper">
            <video id="v-rule" controls="controls" x5-playsinline="" playsinline="" webkit-playsinline="">
                请使用现代浏览器，如Chrome Firefox Safari Edge
            </video>

            <p class="subtitle"></p>
        </div>

        <h2>历史</h2>
		<video id="v-history" controls src=""></video>
		
		<h2>水平测评</h2>
		<a id="tennis-level" href="" target="_blank">评测</a>

		<h2>排行榜</h2>
		<ol>
			<li>1</li>
			<li>2</li>
		</ol>

		<script id="athlete-template" type="text/template">
			{{~it:item}}
				{{style=item.gender==1? 'color: green;': 'color: red;';}}
				<li style="{{=style}}">{{=item.name}}</li>
			{{~}}
		</script>
		
		<script src="../lib/dot.min.js"></script>
		<script src="../js/sport_intro.js"></script>
		<script>
			window.vEle = $('video');

            // bindVideo(2, '#v-rule');
            // bindSubtitle(2, '#v-rule');
			// bindVideo(1, '#v-history');
			
			$('#tennis-level').attr('href', CONSTANT.level.tennis);

			queryAthletes();

			function bindVideo(videoId, selector){
				tools.insertScriptTag(1, "../lib/hls.js", {onload: function(){
                    tools.insertScriptTag(
						2, 
						FRAGMENTS.attachVideo(videoId, 360, true, selector), 
						{id: 'hls-frag' + selector}
					);
				}.bind(this), id: 'hls'+selector});
            }
            
            function bindSubtitle(videoId, selector){
				let captionAPI = '/caption/' + videoId + '?noTutorial=1';

				tools.xhr(captionAPI, function(res){
					if(!res)
						return;
						
					let playerWrapper = $(selector).parent('.player-wrapper');

					tools.attachSubtile($(selector)[0], res, 500, function(subtitle){
						playerWrapper.find('.subtitle').text(subtitle)/* .css({

						}) */;
					});
				});
			}

			function queryAthletes(){
				tools.xhr('/athletes/1', function(res){
					var athletes = res;
					console.log(res);
					

					var athleteTemplateFn = doT.template($('#athlete-template').html());
					$('ol').html(
						athleteTemplateFn(res)
					);
				}.bind(this));
			}
		</script>
		
		<!-- <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=5XGIRhLpHgiaALCHuFfkCGcAewbkm4IP"></script>
		<script>
		(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
				bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
				bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
		})();
		</script> -->

	</body>
</html>